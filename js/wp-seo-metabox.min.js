"use strict";var YoastShortcodePlugin=function(){this.registerTime=0,this.register(),this.unparsedShortcodes=[],this.parsedShortcodes=[],this.keywordRegex="("+wpseoMetaboxL10n.wpseo_shortcode_tags.join("|")+")",this.loadShortcodes()};YoastShortcodePlugin.prototype.register=function(){"undefined"!=typeof YoastSEO&&"undefined"!=typeof YoastSEO.app&&"undefined"!=typeof YoastSEO.app.plugins?YoastSEO.app.plugins.register("YoastShortcodePlugin"):this.registerTime<1001?(this.registerTime+=100,setTimeout(this.register,100)):console.error("Failed to register shortcode plugin with YoastSEO. YoastSEO is not available.")},YoastShortcodePlugin.prototype.loadShortcodes=function(){var a=document.getElementById("title").value,b=this.getContentTinyMCE();this.checkUnparsedShortcodes(a),this.checkUnparsedShortcodes(b),this.parseShortcodes()},YoastShortcodePlugin.prototype.checkUnparsedShortcodes=function(a){if("string"!=typeof a)return console.error("Failed to get unparsed shortcodes. Expected parameter to be a string, instead received"+typeof a),!1;var b=this.matchShortcodes(a);for(var c in b){var d=b[c];void 0===this.parsedShortcodes[d]&&-1===this.unparsedShortcodes.indexOf(d)&&this.unparsedShortcodes.push(d)}},YoastShortcodePlugin.prototype.matchShortcodes=function(a){var b=[],c="\\[\\/"+this.keywordRegex+"\\]",d=(a.match(new RegExp(c,"g"))||[]).join(" ").match(new RegExp(this.keywordRegex,"g"));for(var e in d){var f=d[e],g="\\["+f+"[^\\]]*?\\].*?\\[\\/"+f+"\\]";b.push(a.match(new RegExp(g,"g"))[0]),a=a.replace(new RegExp(g,"g"),"")}var h="\\["+this.keywordRegex+"[^\\]]*?\\]",i=a.match(new RegExp(h,"g"));for(var e in i){var j=i[e];-1===b.indexOf(j)&&b.push(j)}return b},YoastShortcodePlugin.prototype.parseShortcodes=function(){if("object"==typeof this.unparsedShortcodes&&this.unparsedShortcodes.length>0){var a=this.unparsedShortcodes;this.unparsedShortcodes=[];var b=this;jQuery.get(ajaxurl,{action:"wpseo_filter_shortcodes",_wpnonce:wpseoMetaboxL10n.wpseo_filter_shortcodes_nonce,data:a},function(a){a=JSON.parse(a);for(var c in a)b.parsedShortcodes.push(a[c])})}},YoastShortcodePlugin.prototype.getContentTinyMCE=function(){var a=document.getElementById("content").value;return 0!==tinyMCE.editors.length&&(a=tinyMCE.get("content").getContent()),a},YoastShortcodePlugin.prototype.registerModifications=function(){YoastSEO.app.plugins.registerModification("title",this.replaceShortcodes,"YoastShortcodePlugin"),YoastSEO.app.plugins.registerModification("content",this.replaceShortcodes,"YoastShortcodePlugin")},YoastShortcodePlugin.prototype.replaceShortcodes=function(a){if("string"==typeof a&&this.parsedShortcodes.length>0){console.log(a);for(var b in this.parsedShortcodes)a=a.replace(this.parsedShortcodes[b].shortcode,this.parsedShortcodes[b].output)}return a},jQuery(document).ready(function(){if(jQuery(".wpseo-metabox-tabs-div").length>0){var a=window.location.hash;a=""===a||-1===a.search("wpseo")?"general":a.replace("#wpseo_",""),jQuery("."+a).addClass("active"),jQuery("a.wpseo_tablink").click(function(){jQuery(".wpseo-metabox-tabs li").removeClass("active"),jQuery(".wpseotab").removeClass("active");var a=jQuery(this).attr("href").replace("#wpseo_","");if(jQuery("."+a).addClass("active"),jQuery(this).parent("li").addClass("active"),jQuery(this).hasClass("scroll")){var b=jQuery(this).attr("href").replace("wpseo_","");jQuery("html, body").animate({scrollTop:jQuery(b).offset().top},500)}})}jQuery(".wpseo-heading").hide(),jQuery(".wpseo-metabox-tabs").show();var b,c={};jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw").autocomplete({minLength:3,formatResult:function(a){return jQuery("<div/>").html(a).html()},source:function(a,d){var e=a.term;return e in c?void d(c[e]):(a._ajax_nonce=wpseoMetaboxL10n.wpseo_keyword_suggest_nonce,a.action="wpseo_get_suggest",void(b=jQuery.getJSON(ajaxurl,a,function(a,f,g){c[e]=a,g===b&&d(a)})))}}),jQuery(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}}),YoastSEO.initialize()});