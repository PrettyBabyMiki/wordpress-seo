yoastWebpackJsonp([18],{

/***/ 2170:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/* global wp, _, wpseoPrimaryCategoryL10n */\n(function ($) {\n\t\"use strict\";\n\n\tvar primaryTermInputTemplate, primaryTermUITemplate, primaryTermScreenReaderTemplate;\n\tvar taxonomies = wpseoPrimaryCategoryL10n.taxonomies;\n\n\t/**\n  * Checks if the elements to make a term the primary term and the display for a primary term exist.\n  *\n  * @param {Object} checkbox The checkbox to get the closest required fields for.\n  *\n  * @returns {boolean} True when there are primary elements.\n  */\n\tfunction hasPrimaryTermElements(checkbox) {\n\t\treturn 1 === $(checkbox).closest(\"li\").children(\".wpseo-make-primary-term\").length;\n\t}\n\n\t/**\n  * Retrieves the primary term for a taxonomy.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {string} The value of the primary term.\n  */\n\tfunction getPrimaryTerm(taxonomyName) {\n\t\tvar primaryTermInput;\n\n\t\tprimaryTermInput = $(\"#yoast-wpseo-primary-\" + taxonomyName);\n\t\treturn primaryTermInput.val();\n\t}\n\n\t/**\n  * Sets the primary term for a taxonomy.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  * @param {string} termId       The term id.\n  *\n  * @returns {void}\n  */\n\tfunction setPrimaryTerm(taxonomyName, termId) {\n\t\tvar primaryTermInput;\n\n\t\tprimaryTermInput = $(\"#yoast-wpseo-primary-\" + taxonomyName);\n\t\tprimaryTermInput.val(termId).trigger(\"change\");\n\t}\n\n\t/**\n  * Creates the elements necessary to show something is a primary term or to make it the primary term.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  * @param {Object} checkbox     The checkbox to get label for.\n  *\n  * @returns {void}\n  */\n\tfunction createPrimaryTermElements(taxonomyName, checkbox) {\n\t\tvar label, html;\n\n\t\tlabel = $(checkbox).closest(\"label\");\n\n\t\thtml = primaryTermUITemplate({\n\t\t\ttaxonomy: taxonomies[taxonomyName],\n\t\t\tterm: label.text()\n\t\t});\n\n\t\tlabel.after(html);\n\t}\n\n\t/**\n  * Updates the primary term selectors/indicators for a certain taxonomy.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {void}\n  */\n\tfunction updatePrimaryTermSelectors(taxonomyName) {\n\t\tvar checkedTerms;\n\t\tvar listItem, label;\n\n\t\tcheckedTerms = $(\"#\" + taxonomyName + 'checklist input[type=\"checkbox\"]:checked');\n\n\t\tvar taxonomyListItem = $(\"#\" + taxonomyName + \"checklist li\");\n\t\ttaxonomyListItem.removeClass(\"wpseo-term-unchecked wpseo-primary-term wpseo-non-primary-term\");\n\n\t\t$(\".wpseo-primary-category-label\").remove();\n\t\ttaxonomyListItem.addClass(\"wpseo-term-unchecked\");\n\n\t\t// If there is only one term selected we don't want to show our interface.\n\t\tif (checkedTerms.length <= 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tcheckedTerms.each(function (i, term) {\n\t\t\tterm = $(term);\n\t\t\tlistItem = term.closest(\"li\");\n\t\t\tlistItem.removeClass(\"wpseo-term-unchecked\");\n\n\t\t\t// Create our interface elements if they don't exist.\n\t\t\tif (!hasPrimaryTermElements(term)) {\n\t\t\t\tcreatePrimaryTermElements(taxonomyName, term);\n\t\t\t}\n\n\t\t\tif (term.val() === getPrimaryTerm(taxonomyName)) {\n\t\t\t\tlistItem.addClass(\"wpseo-primary-term\");\n\n\t\t\t\tlabel = term.closest(\"label\");\n\t\t\t\tlabel.find(\".wpseo-primary-category-label\").remove();\n\t\t\t\tlabel.append(primaryTermScreenReaderTemplate({\n\t\t\t\t\ttaxonomy: taxonomies[taxonomyName]\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tlistItem.addClass(\"wpseo-non-primary-term\");\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n  * Makes the first term primary for a certain taxonomy.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {void}\n  */\n\tfunction makeFirstTermPrimary(taxonomyName) {\n\t\tvar firstTerm = $(\"#\" + taxonomyName + 'checklist input[type=\"checkbox\"]:checked:first');\n\n\t\tsetPrimaryTerm(taxonomyName, firstTerm.val());\n\t\tupdatePrimaryTermSelectors(taxonomyName);\n\t}\n\n\t/**\n  * If we check a term while there is no primary term we make that one the primary term.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {void}\n  */\n\tfunction ensurePrimaryTerm(taxonomyName) {\n\t\tif (\"\" === getPrimaryTerm(taxonomyName)) {\n\t\t\tmakeFirstTermPrimary(taxonomyName);\n\t\t}\n\t}\n\n\t/**\n  * Returns the term checkbox handler for a certain taxonomy name.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {Function} Event handler for the checkbox.\n  */\n\tfunction termCheckboxHandler(taxonomyName) {\n\t\treturn function () {\n\t\t\t// If the user unchecks the primary category we have to select any new primary term\n\t\t\tif (false === $(this).prop(\"checked\") && $(this).val() === getPrimaryTerm(taxonomyName)) {\n\t\t\t\tmakeFirstTermPrimary(taxonomyName);\n\t\t\t}\n\n\t\t\tensurePrimaryTerm(taxonomyName);\n\n\t\t\tupdatePrimaryTermSelectors(taxonomyName);\n\t\t};\n\t}\n\n\t/**\n  * Returns the term list add handler for a certain taxonomy name.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {Function} The term list add handler.\n  */\n\tfunction termListAddHandler(taxonomyName) {\n\t\treturn function () {\n\t\t\tensurePrimaryTerm(taxonomyName);\n\t\t\tupdatePrimaryTermSelectors(taxonomyName);\n\t\t};\n\t}\n\n\t/**\n  * Returns the make primary event handler for a certain taxonomy name.\n  *\n  * @param {string} taxonomyName The taxonomy name.\n  *\n  * @returns {Function} The event handler.\n  */\n\tfunction makePrimaryHandler(taxonomyName) {\n\t\treturn function (e) {\n\t\t\tvar term, checkbox;\n\n\t\t\tterm = $(e.currentTarget);\n\t\t\tcheckbox = term.siblings(\"label\").find(\"input\");\n\n\t\t\tsetPrimaryTerm(taxonomyName, checkbox.val());\n\n\t\t\tupdatePrimaryTermSelectors(taxonomyName);\n\n\t\t\t// The clicked link will be hidden so we need to focus something different.\n\t\t\tcheckbox.focus();\n\t\t};\n\t}\n\n\t$.fn.initYstSEOPrimaryCategory = function () {\n\t\treturn this.each(function (i, taxonomy) {\n\t\t\tvar metaboxTaxonomy, html;\n\n\t\t\tmetaboxTaxonomy = $(\"#\" + taxonomy.name + \"div\");\n\n\t\t\thtml = primaryTermInputTemplate({\n\t\t\t\ttaxonomy: taxonomy\n\t\t\t});\n\n\t\t\tmetaboxTaxonomy.append(html);\n\n\t\t\tupdatePrimaryTermSelectors(taxonomy.name);\n\n\t\t\tmetaboxTaxonomy.on(\"click\", 'input[type=\"checkbox\"]', termCheckboxHandler(taxonomy.name));\n\n\t\t\t// When the AJAX Request is done, this event will be fired.\n\t\t\tmetaboxTaxonomy.on(\"wpListAddEnd\", \"#\" + taxonomy.name + \"checklist\", termListAddHandler(taxonomy.name));\n\n\t\t\tmetaboxTaxonomy.on(\"click\", \".wpseo-make-primary-term\", makePrimaryHandler(taxonomy.name));\n\t\t});\n\t};\n\n\t$(function () {\n\t\t// Initialize our templates\n\t\tprimaryTermInputTemplate = wp.template(\"primary-term-input\");\n\t\tprimaryTermUITemplate = wp.template(\"primary-term-ui\");\n\t\tprimaryTermScreenReaderTemplate = wp.template(\"primary-term-screen-reader\");\n\n\t\t$(_.values(taxonomies)).initYstSEOPrimaryCategory();\n\t});\n})(jQuery);\n\n//////////////////\n// WEBPACK FOOTER\n// ./wp-seo-metabox-category.js\n// module id = 2170\n// module chunks = 18\n\n//# sourceURL=webpack:///./wp-seo-metabox-category.js?");

/***/ })

},[2170]);