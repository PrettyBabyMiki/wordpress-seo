(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

/* jshint unused:false */
/* global ajaxurl */
/* global tb_click */
/* global tb_remove */
jQuery(function () {
	"use strict";

	// Store the control that opened the modal dialog for later use.

	var $gscModalFocusedBefore;

	jQuery("#gsc_auth_code").click(function () {
		var auth_url = jQuery("#gsc_auth_url").val(),
		    w = 600,
		    h = 500,
		    left = screen.width / 2 - w / 2,
		    top = screen.height / 2 - h / 2;
		return window.open(auth_url, "wpseogscauthcode", "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width=" + w + ", height=" + h + ", top=" + top + ", left=" + left);
	});

	// Accessibility improvements for the Create Redirect modal dialog.
	jQuery(".wpseo-open-gsc-redirect-modal").click(function (event) {
		var $modal;
		var $modalTitle;
		var $closeButtonTop;
		var $closeButtonBottom;

		// Get the link text to be used as the modal title.
		var title = jQuery(this).text();

		// Prevent default action.
		event.preventDefault();
		// Prevent triggering Thickbox original click.
		event.stopPropagation();
		// Get the control that opened the modal dialog.
		$gscModalFocusedBefore = jQuery(this);
		// Call Thickbox now and bind `this`. The Thickbox UI is now available.
		tb_click.call(this);

		// Get the Thickbox modal elements.
		$modal = jQuery("#TB_window");
		$modalTitle = jQuery("#TB_ajaxWindowTitle");
		$closeButtonTop = jQuery("#TB_closeWindowButton");
		$closeButtonBottom = jQuery(".wpseo-redirect-close", $modal);

		// Set the modal title.
		$modalTitle.text(title);

		// Set ARIA role and ARIA attributes.
		$modal.attr({
			role: "dialog",
			"aria-labelledby": "TB_ajaxWindowTitle",
			"aria-describedby": "TB_ajaxContent"
		}).on("keydown", function (event) {
			var id;

			// Constrain tabbing within the modal.
			if (9 === event.which) {
				id = event.target.id;

				if (jQuery(event.target).hasClass("wpseo-redirect-close") && !event.shiftKey) {
					$closeButtonTop.focus();
					event.preventDefault();
				} else if (id === "TB_closeWindowButton" && event.shiftKey) {
					$closeButtonBottom.focus();
					event.preventDefault();
				}
			}
		});
	});

	jQuery(document.body).on("click", ".wpseo-redirect-close", function () {
		// Close the Thickbox modal when clicking on the bottom button.
		jQuery(this).closest("#TB_window").find("#TB_closeWindowButton").trigger("click");
	}).on("thickbox:removed", function () {
		// Move focus back to the element that opened the modal.
		$gscModalFocusedBefore.focus();
	});
});

/**
 * Adds a redirect from the google search console overview.
 *
 * @returns {boolean} Always returns false to cancel the default event handler.
 */
function wpseo_gsc_post_redirect() {
	"use strict";

	var target_form = jQuery("#TB_ajaxContent");
	var old_url = jQuery(target_form).find("input[name=current_url]").val();
	var is_checked = jQuery(target_form).find("input[name=mark_as_fixed]").prop("checked");

	jQuery.post(ajaxurl, {
		action: "wpseo_gsc_create_redirect_url",
		ajax_nonce: jQuery(".wpseo-gsc-ajax-security").val(),
		old_url: old_url,
		new_url: jQuery(target_form).find("input[name=new_url]").val(),
		mark_as_fixed: is_checked,
		platform: jQuery("#field_platform").val(),
		category: jQuery("#field_category").val(),
		type: "301"
	}, function () {
		if (is_checked === true) {
			// Remove the row with old url
			jQuery('span:contains("' + old_url + '")').closest("tr").remove();
		}

		// Remove the thickbox
		tb_remove();
	});

	return false;
}

/**
 * Decrement current category count by one.
 *
 * @param {string} category The category count to update.
 */
function wpseo_update_category_count(category) {
	"use strict";

	var count_element = jQuery("#gsc_count_" + category + "");
	var new_count = parseInt(count_element.text(), 10) - 1;
	if (new_count < 0) {
		new_count = 0;
	}

	count_element.text(new_count);
}

/**
 * Marks a search console crawl issue as fixed.
 *
 * @param {string} url The URL that has been fixed.
 */
function wpseo_mark_as_fixed(url) {
	"use strict";

	jQuery.post(ajaxurl, {
		action: "wpseo_mark_fixed_crawl_issue",
		ajax_nonce: jQuery(".wpseo-gsc-ajax-security").val(),
		platform: jQuery("#field_platform").val(),
		category: jQuery("#field_category").val(),
		url: url
	}, function (response) {
		if ("true" === response) {
			wpseo_update_category_count(jQuery("#field_category").val());
			jQuery('span:contains("' + url + '")').closest("tr").remove();
		}
	});
}

window.wpseo_gsc_post_redirect = wpseo_gsc_post_redirect;
window.wpseo_update_category_count = wpseo_update_category_count;
window.wpseo_mark_as_fixed = wpseo_mark_as_fixed;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcc3JjXFx3cC1zZW8tYWRtaW4tZ3NjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQVEsWUFBVztBQUNsQjs7QUFFQTs7QUFDQSxLQUFJLHNCQUFKOztBQUVBLFFBQVEsZ0JBQVIsRUFBMkIsS0FBM0IsQ0FDQyxZQUFXO0FBQ1YsTUFBSSxXQUFXLE9BQVEsZUFBUixFQUEwQixHQUExQixFQUFmO0FBQUEsTUFDQyxJQUFJLEdBREw7QUFBQSxNQUVDLElBQUksR0FGTDtBQUFBLE1BR0MsT0FBUyxPQUFPLEtBQVAsR0FBZSxDQUFqQixHQUF5QixJQUFJLENBSHJDO0FBQUEsTUFJQyxNQUFRLE9BQU8sTUFBUCxHQUFnQixDQUFsQixHQUEwQixJQUFJLENBSnJDO0FBS0EsU0FBTyxPQUFPLElBQVAsQ0FBYSxRQUFiLEVBQXVCLGtCQUF2QixFQUEyQyx5SEFBeUgsQ0FBekgsR0FBNkgsV0FBN0gsR0FBMkksQ0FBM0ksR0FBK0ksUUFBL0ksR0FBMEosR0FBMUosR0FBZ0ssU0FBaEssR0FBNEssSUFBdk4sQ0FBUDtBQUNBLEVBUkY7O0FBV0E7QUFDQSxRQUFRLGdDQUFSLEVBQTJDLEtBQTNDLENBQ0MsVUFBVSxLQUFWLEVBQWtCO0FBQ2pCLE1BQUksTUFBSjtBQUNBLE1BQUksV0FBSjtBQUNBLE1BQUksZUFBSjtBQUNBLE1BQUksa0JBQUo7O0FBRUE7QUFDQSxNQUFJLFFBQVEsT0FBUSxJQUFSLEVBQWUsSUFBZixFQUFaOztBQUVBO0FBQ0EsUUFBTSxjQUFOO0FBQ0E7QUFDQSxRQUFNLGVBQU47QUFDQTtBQUNBLDJCQUF5QixPQUFRLElBQVIsQ0FBekI7QUFDQTtBQUNBLFdBQVMsSUFBVCxDQUFlLElBQWY7O0FBRUE7QUFDQSxX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LFFBQU8sSUFBUCxDQUNDLE9BREQsRUFFQztBQUNDLFVBQVEsOEJBRFQ7QUFFQyxjQUFZLE9BQVEsMEJBQVIsRUFBcUMsR0FBckMsRUFGYjtBQUdDLFlBQVUsT0FBUSxpQkFBUixFQUE0QixHQUE1QixFQUhYO0FBSUMsWUFBVSxPQUFRLGlCQUFSLEVBQTRCLEdBQTVCLEVBSlg7QUFLQyxPQUFLO0FBTE4sRUFGRCxFQVNDLFVBQVUsUUFBVixFQUFxQjtBQUNwQixNQUFLLFdBQVcsUUFBaEIsRUFBMkI7QUFDMUIsK0JBQTZCLE9BQVEsaUJBQVIsRUFBNEIsR0FBNUIsRUFBN0I7QUFDQSxVQUFRLG9CQUFvQixHQUFwQixHQUEwQixJQUFsQyxFQUF5QyxPQUF6QyxDQUFrRCxJQUFsRCxFQUF5RCxNQUF6RDtBQUNBO0FBQ0QsRUFkRjtBQWdCQTs7QUFFRCxPQUFPLHVCQUFQLEdBQWlDLHVCQUFqQztBQUNBLE9BQU8sMkJBQVAsR0FBcUMsMkJBQXJDO0FBQ0EsT0FBTyxtQkFBUCxHQUE2QixtQkFBN0IiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoganNoaW50IHVudXNlZDpmYWxzZSAqL1xyXG4vKiBnbG9iYWwgYWpheHVybCAqL1xyXG4vKiBnbG9iYWwgdGJfY2xpY2sgKi9cclxuLyogZ2xvYmFsIHRiX3JlbW92ZSAqL1xyXG5qUXVlcnkoIGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHQvLyBTdG9yZSB0aGUgY29udHJvbCB0aGF0IG9wZW5lZCB0aGUgbW9kYWwgZGlhbG9nIGZvciBsYXRlciB1c2UuXHJcblx0dmFyICRnc2NNb2RhbEZvY3VzZWRCZWZvcmU7XHJcblxyXG5cdGpRdWVyeSggXCIjZ3NjX2F1dGhfY29kZVwiICkuY2xpY2soXHJcblx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGF1dGhfdXJsID0galF1ZXJ5KCBcIiNnc2NfYXV0aF91cmxcIiApLnZhbCgpLFxyXG5cdFx0XHRcdHcgPSA2MDAsXHJcblx0XHRcdFx0aCA9IDUwMCxcclxuXHRcdFx0XHRsZWZ0ID0gKCBzY3JlZW4ud2lkdGggLyAyICkgLSAoIHcgLyAyICksXHJcblx0XHRcdFx0dG9wID0gKCBzY3JlZW4uaGVpZ2h0IC8gMiApIC0gKCBoIC8gMiApO1xyXG5cdFx0XHRyZXR1cm4gd2luZG93Lm9wZW4oIGF1dGhfdXJsLCBcIndwc2VvZ3NjYXV0aGNvZGVcIiwgXCJ0b29sYmFyPW5vLCBsb2NhdGlvbj1ubywgZGlyZWN0b3JpZXM9bm8sIHN0YXR1cz1ubywgbWVudWJhcj1ubywgc2Nyb2xsYmFycz15ZXMsIHJlc2l6YWJsZT1ubywgY29weWhpc3Rvcnk9bm8sIHdpZHRoPVwiICsgdyArIFwiLCBoZWlnaHQ9XCIgKyBoICsgXCIsIHRvcD1cIiArIHRvcCArIFwiLCBsZWZ0PVwiICsgbGVmdCApO1xyXG5cdFx0fVxyXG5cdCk7XHJcblxyXG5cdC8vIEFjY2Vzc2liaWxpdHkgaW1wcm92ZW1lbnRzIGZvciB0aGUgQ3JlYXRlIFJlZGlyZWN0IG1vZGFsIGRpYWxvZy5cclxuXHRqUXVlcnkoIFwiLndwc2VvLW9wZW4tZ3NjLXJlZGlyZWN0LW1vZGFsXCIgKS5jbGljayhcclxuXHRcdGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyICRtb2RhbDtcclxuXHRcdFx0dmFyICRtb2RhbFRpdGxlO1xyXG5cdFx0XHR2YXIgJGNsb3NlQnV0dG9uVG9wO1xyXG5cdFx0XHR2YXIgJGNsb3NlQnV0dG9uQm90dG9tO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBsaW5rIHRleHQgdG8gYmUgdXNlZCBhcyB0aGUgbW9kYWwgdGl0bGUuXHJcblx0XHRcdHZhciB0aXRsZSA9IGpRdWVyeSggdGhpcyApLnRleHQoKTtcclxuXHJcblx0XHRcdC8vIFByZXZlbnQgZGVmYXVsdCBhY3Rpb24uXHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmluZyBUaGlja2JveCBvcmlnaW5hbCBjbGljay5cclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdC8vIEdldCB0aGUgY29udHJvbCB0aGF0IG9wZW5lZCB0aGUgbW9kYWwgZGlhbG9nLlxyXG5cdFx0XHQkZ3NjTW9kYWxGb2N1c2VkQmVmb3JlID0galF1ZXJ5KCB0aGlzICk7XHJcblx0XHRcdC8vIENhbGwgVGhpY2tib3ggbm93IGFuZCBiaW5kIGB0aGlzYC4gVGhlIFRoaWNrYm94IFVJIGlzIG5vdyBhdmFpbGFibGUuXHJcblx0XHRcdHRiX2NsaWNrLmNhbGwoIHRoaXMgKTtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgVGhpY2tib3ggbW9kYWwgZWxlbWVudHMuXHJcblx0XHRcdCRtb2RhbCA9IGpRdWVyeSggXCIjVEJfd2luZG93XCIgKTtcclxuXHRcdFx0JG1vZGFsVGl0bGUgPSBqUXVlcnkoIFwiI1RCX2FqYXhXaW5kb3dUaXRsZVwiICk7XHJcblx0XHRcdCRjbG9zZUJ1dHRvblRvcCA9IGpRdWVyeSggXCIjVEJfY2xvc2VXaW5kb3dCdXR0b25cIiApO1xyXG5cdFx0XHQkY2xvc2VCdXR0b25Cb3R0b20gPSBqUXVlcnkoIFwiLndwc2VvLXJlZGlyZWN0LWNsb3NlXCIsICRtb2RhbCApO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBtb2RhbCB0aXRsZS5cclxuXHRcdFx0JG1vZGFsVGl0bGUudGV4dCggdGl0bGUgKTtcclxuXHJcblx0XHRcdC8vIFNldCBBUklBIHJvbGUgYW5kIEFSSUEgYXR0cmlidXRlcy5cclxuXHRcdFx0JG1vZGFsLmF0dHIoIHtcclxuXHRcdFx0XHRyb2xlOiBcImRpYWxvZ1wiLFxyXG5cdFx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IFwiVEJfYWpheFdpbmRvd1RpdGxlXCIsXHJcblx0XHRcdFx0XCJhcmlhLWRlc2NyaWJlZGJ5XCI6IFwiVEJfYWpheENvbnRlbnRcIixcclxuXHRcdFx0fSApXHJcblx0XHRcdC5vbiggXCJrZXlkb3duXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHR2YXIgaWQ7XHJcblxyXG5cdFx0XHRcdC8vIENvbnN0cmFpbiB0YWJiaW5nIHdpdGhpbiB0aGUgbW9kYWwuXHJcblx0XHRcdFx0aWYgKCA5ID09PSBldmVudC53aGljaCApIHtcclxuXHRcdFx0XHRcdGlkID0gZXZlbnQudGFyZ2V0LmlkO1xyXG5cclxuXHRcdFx0XHRcdGlmICggalF1ZXJ5KCBldmVudC50YXJnZXQgKS5oYXNDbGFzcyggXCJ3cHNlby1yZWRpcmVjdC1jbG9zZVwiICkgJiYgISBldmVudC5zaGlmdEtleSApIHtcclxuXHRcdFx0XHRcdFx0JGNsb3NlQnV0dG9uVG9wLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpZCA9PT0gXCJUQl9jbG9zZVdpbmRvd0J1dHRvblwiICYmIGV2ZW50LnNoaWZ0S2V5ICkge1xyXG5cdFx0XHRcdFx0XHQkY2xvc2VCdXR0b25Cb3R0b20uZm9jdXMoKTtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gKTtcclxuXHRcdH1cclxuXHQpO1xyXG5cclxuXHRqUXVlcnkoIGRvY3VtZW50LmJvZHkgKS5vbiggXCJjbGlja1wiLCBcIi53cHNlby1yZWRpcmVjdC1jbG9zZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdC8vIENsb3NlIHRoZSBUaGlja2JveCBtb2RhbCB3aGVuIGNsaWNraW5nIG9uIHRoZSBib3R0b20gYnV0dG9uLlxyXG5cdFx0alF1ZXJ5KCB0aGlzICkuY2xvc2VzdCggXCIjVEJfd2luZG93XCIgKS5maW5kKCBcIiNUQl9jbG9zZVdpbmRvd0J1dHRvblwiICkudHJpZ2dlciggXCJjbGlja1wiICk7XHJcblx0fSApLm9uKCBcInRoaWNrYm94OnJlbW92ZWRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBNb3ZlIGZvY3VzIGJhY2sgdG8gdGhlIGVsZW1lbnQgdGhhdCBvcGVuZWQgdGhlIG1vZGFsLlxyXG5cdFx0JGdzY01vZGFsRm9jdXNlZEJlZm9yZS5mb2N1cygpO1xyXG5cdH0gKTtcclxufSApO1xyXG5cclxuLyoqXHJcbiAqIEFkZHMgYSByZWRpcmVjdCBmcm9tIHRoZSBnb29nbGUgc2VhcmNoIGNvbnNvbGUgb3ZlcnZpZXcuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBBbHdheXMgcmV0dXJucyBmYWxzZSB0byBjYW5jZWwgdGhlIGRlZmF1bHQgZXZlbnQgaGFuZGxlci5cclxuICovXHJcbmZ1bmN0aW9uIHdwc2VvX2dzY19wb3N0X3JlZGlyZWN0KCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHR2YXIgdGFyZ2V0X2Zvcm0gPSBqUXVlcnkoIFwiI1RCX2FqYXhDb250ZW50XCIgKTtcclxuXHR2YXIgb2xkX3VybCAgICAgPSBqUXVlcnkoIHRhcmdldF9mb3JtICkuZmluZCggXCJpbnB1dFtuYW1lPWN1cnJlbnRfdXJsXVwiICkudmFsKCk7XHJcblx0dmFyIGlzX2NoZWNrZWQgID0galF1ZXJ5KCB0YXJnZXRfZm9ybSApLmZpbmQoIFwiaW5wdXRbbmFtZT1tYXJrX2FzX2ZpeGVkXVwiICkucHJvcCggXCJjaGVja2VkXCIgKTtcclxuXHJcblx0alF1ZXJ5LnBvc3QoXHJcblx0XHRhamF4dXJsLFxyXG5cdFx0e1xyXG5cdFx0XHRhY3Rpb246IFwid3BzZW9fZ3NjX2NyZWF0ZV9yZWRpcmVjdF91cmxcIixcclxuXHRcdFx0YWpheF9ub25jZTogalF1ZXJ5KCBcIi53cHNlby1nc2MtYWpheC1zZWN1cml0eVwiICkudmFsKCksXHJcblx0XHRcdG9sZF91cmw6IG9sZF91cmwsXHJcblx0XHRcdG5ld191cmw6IGpRdWVyeSggdGFyZ2V0X2Zvcm0gKS5maW5kKCBcImlucHV0W25hbWU9bmV3X3VybF1cIiApLnZhbCgpLFxyXG5cdFx0XHRtYXJrX2FzX2ZpeGVkOiBpc19jaGVja2VkLFxyXG5cdFx0XHRwbGF0Zm9ybTogalF1ZXJ5KCBcIiNmaWVsZF9wbGF0Zm9ybVwiICkudmFsKCksXHJcblx0XHRcdGNhdGVnb3J5OiBqUXVlcnkoIFwiI2ZpZWxkX2NhdGVnb3J5XCIgKS52YWwoKSxcclxuXHRcdFx0dHlwZTogXCIzMDFcIixcclxuXHRcdH0sXHJcblx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYoIGlzX2NoZWNrZWQgPT09IHRydWUgKSB7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSByb3cgd2l0aCBvbGQgdXJsXHJcblx0XHRcdFx0alF1ZXJ5KCAnc3Bhbjpjb250YWlucyhcIicgKyBvbGRfdXJsICsgJ1wiKScgKS5jbG9zZXN0KCBcInRyXCIgKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSB0aGlja2JveFxyXG5cdFx0XHR0Yl9yZW1vdmUoKTtcclxuXHRcdH1cclxuXHQpO1xyXG5cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWNyZW1lbnQgY3VycmVudCBjYXRlZ29yeSBjb3VudCBieSBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYXRlZ29yeSBUaGUgY2F0ZWdvcnkgY291bnQgdG8gdXBkYXRlLlxyXG4gKi9cclxuZnVuY3Rpb24gd3BzZW9fdXBkYXRlX2NhdGVnb3J5X2NvdW50KCBjYXRlZ29yeSApIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0dmFyIGNvdW50X2VsZW1lbnQgPSBqUXVlcnkoIFwiI2dzY19jb3VudF9cIiArIGNhdGVnb3J5ICsgXCJcIiApO1xyXG5cdHZhciBuZXdfY291bnQgICAgID0gcGFyc2VJbnQoIGNvdW50X2VsZW1lbnQudGV4dCgpLCAxMCApIC0gMTtcclxuXHRpZiggbmV3X2NvdW50IDwgMCApIHtcclxuXHRcdG5ld19jb3VudCA9IDA7XHJcblx0fVxyXG5cclxuXHRjb3VudF9lbGVtZW50LnRleHQoIG5ld19jb3VudCApO1xyXG59XHJcblxyXG4vKipcclxuICogTWFya3MgYSBzZWFyY2ggY29uc29sZSBjcmF3bCBpc3N1ZSBhcyBmaXhlZC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRoYXQgaGFzIGJlZW4gZml4ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cHNlb19tYXJrX2FzX2ZpeGVkKCB1cmwgKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGpRdWVyeS5wb3N0KFxyXG5cdFx0YWpheHVybCxcclxuXHRcdHtcclxuXHRcdFx0YWN0aW9uOiBcIndwc2VvX21hcmtfZml4ZWRfY3Jhd2xfaXNzdWVcIixcclxuXHRcdFx0YWpheF9ub25jZTogalF1ZXJ5KCBcIi53cHNlby1nc2MtYWpheC1zZWN1cml0eVwiICkudmFsKCksXHJcblx0XHRcdHBsYXRmb3JtOiBqUXVlcnkoIFwiI2ZpZWxkX3BsYXRmb3JtXCIgKS52YWwoKSxcclxuXHRcdFx0Y2F0ZWdvcnk6IGpRdWVyeSggXCIjZmllbGRfY2F0ZWdvcnlcIiApLnZhbCgpLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdH0sXHJcblx0XHRmdW5jdGlvbiggcmVzcG9uc2UgKSB7XHJcblx0XHRcdGlmICggXCJ0cnVlXCIgPT09IHJlc3BvbnNlICkge1xyXG5cdFx0XHRcdHdwc2VvX3VwZGF0ZV9jYXRlZ29yeV9jb3VudCggalF1ZXJ5KCBcIiNmaWVsZF9jYXRlZ29yeVwiICkudmFsKCkgKTtcclxuXHRcdFx0XHRqUXVlcnkoICdzcGFuOmNvbnRhaW5zKFwiJyArIHVybCArICdcIiknICkuY2xvc2VzdCggXCJ0clwiICkucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHQpO1xyXG59XHJcblxyXG53aW5kb3cud3BzZW9fZ3NjX3Bvc3RfcmVkaXJlY3QgPSB3cHNlb19nc2NfcG9zdF9yZWRpcmVjdDtcclxud2luZG93Lndwc2VvX3VwZGF0ZV9jYXRlZ29yeV9jb3VudCA9IHdwc2VvX3VwZGF0ZV9jYXRlZ29yeV9jb3VudDtcclxud2luZG93Lndwc2VvX21hcmtfYXNfZml4ZWQgPSB3cHNlb19tYXJrX2FzX2ZpeGVkO1xyXG4iXX0=
